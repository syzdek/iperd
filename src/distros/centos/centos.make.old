

FILES_CENTOS		+= boot/centos$(VERSION)/iso.cfg \
			  boot/centos$(VERSION)/pxe.cfg \
			  boot/centos$(VERSION)/sys.cfg \
			  boot/centos$(VERSION)/initrd \
			  boot/centos$(VERSION)/vmlinuz


.PHONY: centos


boot/centos$(VERSION)/iso.cfg: $(DISTROSDIR)/centos/centos.cfg
	@SRCFILE="$(DISTROSDIR)/centos/centos.cfg"; $(do_subst_fn)


boot/centos$(VERSION)/pxe.cfg: $(DISTROSDIR)/centos/centos.cfg
	@SRCFILE="$(DISTROSDIR)/centos/centos.cfg"; $(do_subst_fn)


boot/centos$(VERSION)/sys.cfg: $(DISTROSDIR)/centos/centos.cfg
	@SRCFILE="$(DISTROSDIR)/centos/centos.cfg"; $(do_subst_fn)


boot/centos$(VERSION)/initrd:
	@rm -f $(@)
	@mkdir -p $$(dirname "$(@)")
	wget \
	   -O "$(@)" \
	   "$(MIRROR_CENTOS)/$(VERSION)/os/x86_64/isolinux/initrd.img" \
	   || { rm -f "$(@)}"; exit 1; }
	@touch "$(@)"


boot/centos$(VERSION)/vmlinuz:
	@rm -f $(@)
	@mkdir -p $$(dirname "$(@)")
	wget \
	   -O "$(@)" \
	   "$(MIRROR_CENTOS)/$(VERSION)/os/x86_64/isolinux/vmlinuz" \
	   || { rm -f "$(@)}"; exit 1; }
	@touch "$(@)"


centos: $(FILES_CENTOS)


# end of makefile

